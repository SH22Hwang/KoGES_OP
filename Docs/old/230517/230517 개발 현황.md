# 230517 개발 현황

## 이전 회의

- 폐경 전 / 후 여성의 골다공증 모델 분석
  
  - F1 score등 안 좋음

- 원인 분석
  
  1. unbalanced data
  
  2. 데이터 자체의 문제

- sampling으로 모델 정확도 향상 되는지 분석
  
  - Undersampling: imblearn.under_sampling.RandomUnderSampler
  - Oversampling:imblearn.over_sampling.SMOTE

- Decision Tree로 학습이 되는지 분석

- 

## undersampling

### max_depth: 3

![](./img/tree_h3.png)

![](./img/feature_importance_h3.png)

- Confusion Matrix:
  [[351 474]
   [ 98 727]]

- Accuracy: 0.653

- Recall : 0.881

- F1 Score: 0.718

- Precison: 0.605

### max_depth: 5

![](./img/tree_h5.png)

![](./img/feature_importance_h5.png)

- Confusion Matrix:
  [[469 356]
   [139 686]]

- Accuracy: 0.700

- Precison: 0.658

- Recall : 0.832

- F1 Score: 0.735

### 제한 없음

![](./img/tree_None.png)

![](./img/feature_importance_None.png)

- Confusion Matrix:
  [[819 6]
   [ 13 812]]

- Accuracy: 0.988

- Precison: 0.993

- Recall : 0.984

- F1 Score: 0.988

## oversampling

### max_depth: 3

- Confusion Matrix:
  [[1264 845]
   [ 450 1659]]

- Accuracy: 0.693

- Precison: 0.663

- Recall : 0.787

- F1 Score: 0.719

### max_depth: 5

- Confusion Matrix:
  [[1414 695]
   [ 484 1625]]

- Accuracy: 0.720

- Precison: 0.700

- Recall : 0.771

- F1 Score: 0.734

### 제한 없음

- Confusion Matrix:
  [[2095 14]
   [ 19 2090]]

- Accuracy: 0.992

- Precison: 0.993

- Recall : 0.991

- F1 Score: 0.992

## 결과 정리

|         | Accuracy  | Precision | Recall    | F1 Score  |
|:------- |:---------:|:---------:|:---------:|:---------:|
| Legacy  | 0.652     | 0.185     | 0.059     | 0.089     |
| Under 3 | 0.653     | **0.881** | 0.718     | 0.605     |
| Under 5 | 0.700     | 0.658     | **0.832** | **0.735** |
| Under N | 0.988     | 0.993     | 0.984     | 0.988     |
| Over 3  | 0.693     | 0.663     | 0.787     | 0.719     |
| Over 5  | **0.720** | 0.700     | 0.771     | 0.734     |
| Over N  | 0.992     | 0.993     | 0.991     | 0.992     |

- 굵은 글씨: 3번째로 높은 것
- 편향성을 제거하니 전체적으로 수치 좋아짐
